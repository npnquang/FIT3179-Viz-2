{
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
    "width": "container",
    "height": 400,
    "projection": { "type": "naturalEarth1" },
    "title": {
        "text": "Original location of storms around the world (2000 - 2025)",
        "fontSize": 16,
        "anchor": "start",
        "color": "#333"
    },
    "params": [
        {
            "name": "globalYear",
            "value": 2010
        }
    ],
    "layer": [
        {
            "data": {
                "url": "https://raw.githubusercontent.com/npnquang/FIT3179-Homework-10/refs/heads/main/data/ne_110m_admin_0_countries.topojson",
                "format": {
                    "type": "topojson",
                    "feature": "ne_110m_admin_0_countries"
                }
            },
            "mark": { "type": "geoshape", "fill": "#eee", "stroke": "#999" }
        },
        {
            "data": {
                "url": "data/ne_110m_graticules_30.json",
                "format": {
                    "type": "topojson",
                    "feature": "ne_110m_graticules_30"
                }
            },
            "mark": {
                "type": "geoshape",
                "fill": null,
                "stroke": "#ddd",
                "strokeWidth": 0.5,
                "opacity": 0.7
            }
        },
        {
            "data": {
                "url": "https://raw.githubusercontent.com/npnquang/FIT3179-Homework-10/refs/heads/main/data/ibtracs_first_locations.csv"
            },
            "transform": [
                {
                    "filter": "datum.YEAR == globalYear"
                }
            ],
            "mark": {
                "type": "circle",
                "opacity": 0.7,
                "size": 60
            },
            "encoding": {
                "longitude": { "field": "LON", "type": "quantitative" },
                "latitude": { "field": "LAT", "type": "quantitative" },
                "color": {
                    "field": "NATURE",
                    "type": "nominal",
                    "title": "Storm Type",
                    "scale": {
                        "domain": [
                            "Tropical",
                            "Extratropical",
                            "Subtropical",
                            "Disturbance",
                            "Mixture(contradicting report from different agencies)",
                            "Not reported"
                        ],
                        "range": [
                            "#d62728",
                            "#ff7f0e",
                            "#2ca02c",
                            "#1f77b4",
                            "#9467bd",
                            "#8c564b"
                        ]
                    },
                    "legend": {
                        "orient": "right",
                        "title": "Storm Type",
                        "titleFontSize": 12,
                        "labelFontSize": 10,
                        "symbolSize": 100,
                        "offset": 20
                    }
                },
                "tooltip": [
                    {
                        "field": "YEAR",
                        "type": "quantitative",
                        "title": "Year"
                    },
                    {
                        "field": "NATURE",
                        "type": "nominal",
                        "title": "Storm Type"
                    }
                ]
            }
        }
    ]
}
